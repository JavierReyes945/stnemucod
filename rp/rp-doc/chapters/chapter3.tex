% Chapter 3 (from main tex file)
% Research Project
% Author: Javier Reyes

\chapter{Embedded Linux}

In order to have a usable stack implementation of Ethernet communication, it is recommended to boot an OS in the device, considering time and complexity for a standalone driver implementation of an Ethernet stack driver for the specific hardware configuration present in the Zynqberry.

Xilinx provides a workflow to create an embedded Linux image fitted for the ARM architecture, by means of a provided tool (a collection of command-line programs) to configure and compile Linux-based images focused on Xilinx hardware, using Yocto Project.

\section{Xilinx Petalinux}

Xilinx Petalinux is an Embedded Linux System Development Kit for Xilinx FPGA-based System-on-Chip devices\cite{UG1144}. It is based on Yocto Project SDK's for the Xilinx hardware architectures (Zynq, Zynq UltraScale+, MicroBlaze full and lite).

The specific workflow for the tool can be different depending on the hardware platform and the desired application(s). As a reference, an overview flow is shown in the table \ref{table:design-flow-overview}.

\begin{table}[ht]
	\centering
	\begin{tabular} {| l | l |}
		\hline
		\textbf{Design Flow Step} & \textbf{Tool / Workflow} \\ [0.25cm]
		\arrayrulecolor[HTML]{B20738} 
		\hline \arrayrulecolor[HTML]{000000}
		Hardware Platform Creation & Vivado \\
		\hline
		Create Petalinux Project & petalinux-create -t Project \\
		\hline
		Initialize Petalinux Project & petalinux-config --get-hw-description \\
		\hline
		Configure System-Level Options & petalinux-config \\
		\hline
		Create User Components & petalinux-create -t COMPONENT \\
		\hline
		Configure the Linux Kernel & petalinux-config -c kernel \\
		\hline
		Configure the Root Filesystem & petalinux-config -c rootfs \\
		\hline
		Build the System & petalinux-build \\
		\hline
		Deploy the System & petalinux-package \\
		\hline
		Test the System & petalinux-boot \\
		\hline
	\end{tabular}
	\caption{Design Flow Overview, from \cite{UG1156}}\label{table:design-flow-overview}.
\end{table}

The Zynqberry board has a specific hasrdware configuration that requires a unique flow for building an embedded Linux image. Therefore, most of the standard flow cannot be applied directly. The followed procedure for this project is detailed in the Appendix \ref{appen1}.

\section{Yocto Project}

The core of the Petalinux tool is the Yocto SDK, an open-source community project aimed to ... % TODO: Complete Yocto information

\section{Boot Up Sequence}

The embedded Linux built for this project requires a non-standard boot up flow, as the Znyq7 XC7Z010 chip has not enough MIO pins for the hardware that would allow the first boot read from an SD card reader. Therefore, a custom boot up sequence was needed.

% TODO: Complete boot up
